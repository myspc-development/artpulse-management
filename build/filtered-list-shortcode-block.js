(()=>{"use strict";const e=window.wp.element,{registerBlockType:t}=wp.blocks,{TextControl:a,PanelBody:l,SelectControl:o,RangeControl:n}=wp.components,{InspectorControls:s}=wp.blockEditor,{useState:r,useEffect:i}=wp.element,{apiFetch:p}=wp,m=[{label:"Artist",value:"ead_artist"},{label:"Artwork",value:"ead_artwork"},{label:"Event",value:"ead_event"},{label:"Organization",value:"ead_organization"}];t("artpulse/filtered-list-shortcode",{title:"Filtered List (Shortcode)",icon:"list-view",category:"widgets",attributes:{postType:{type:"string",default:"ead_artist"},taxonomy:{type:"string",default:"artist_specialty"},terms:{type:"string",default:""},postsPerPage:{type:"number",default:5}},edit:t=>{const{attributes:c,setAttributes:u}=t,{postType:d,taxonomy:g,terms:y,postsPerPage:b}=c,[v,w]=r([]);return i(()=>{d?p({path:`/wp/v2/types/${d}`}).then(e=>{w(Object.keys(e.taxonomies||{}))}):w([])},[d]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s,null,(0,e.createElement)(l,{title:"Settings",initialOpen:!0},(0,e.createElement)(o,{label:"Post Type",value:d,options:m,onChange:e=>u({postType:e,taxonomy:"",terms:""})}),(0,e.createElement)(o,{label:"Taxonomy",value:g,options:v.map(e=>({label:e,value:e})),onChange:e=>u({taxonomy:e,terms:""})}),(0,e.createElement)(a,{label:"Terms (comma separated slugs)",value:y,onChange:e=>u({terms:e})}),(0,e.createElement)(n,{label:"Number of posts",value:b,onChange:e=>u({postsPerPage:e}),min:1,max:20}))),(0,e.createElement)("p",null,"This block renders a filtered list using the shortcode:",(0,e.createElement)("br",null),(0,e.createElement)("code",null,'[ap_filtered_list post_type="',d,'" taxonomy="',g,'" terms="',y,'" posts_per_page="',b,'"]')))},save:()=>null})})();